# 实验十 模式分解

|  姓名  |     学号     |     学院     |   日期    |
| :----: | :----------: | :----------: | :-------: |
| 臧祝利 | 202011998088 | 人工智能学院 | 2022.11.7 |

## 实验目的

了解有损分解与无损分解概念，体会有损分解与无损分解具体情况。

## 实验内容

分别操作课本有损分解示例与无损分解示例，比较原表与分解后两个表联接结果，体会有损分解与无损分解的情况。

## 实验思路

(1) 创建 `er_paper` 表，录入相应数据并查询表格结果；

**Step1.**新建表；

<img src="https://noteimg-12138.oss-cn-beijing.aliyuncs.com/img/202211071811081.png" alt="image-20221107181139901" style="zoom:80%;" />

**Step2.**设置表的相关内容；

输入其名称`er_paper`;

<img src="https://noteimg-12138.oss-cn-beijing.aliyuncs.com/img/202211071812846.png" alt="image-20221107181250625" style="zoom:80%;" />

输入表的各个属性，设置`eid`为主键；

<img src="https://noteimg-12138.oss-cn-beijing.aliyuncs.com/img/202211071814440.png" alt="image-20221107181441212" style="zoom:80%;" />

**Step3.**输入数据

右击表，点击“查看/编辑数据”-->“所有行”

<img src="https://noteimg-12138.oss-cn-beijing.aliyuncs.com/img/202211071819382.png" alt="image-20221107181912235" style="zoom:80%;" />

点击添加按钮，然后向内输入数据；

<img src="https://noteimg-12138.oss-cn-beijing.aliyuncs.com/img/202211071820341.png" alt="image-20221107182020244" style="zoom:80%;" />

点击保存；

<img src="https://noteimg-12138.oss-cn-beijing.aliyuncs.com/img/202211071820555.png" alt="image-20221107182045399" style="zoom:80%;" />

**Step4.**查询表格结果

执行代码

```sql
SELECT * FROM er_paper
```

查询结果如下：

<img src="https://noteimg-12138.oss-cn-beijing.aliyuncs.com/img/202211071821271.png" alt="image-20221107182151182" style="zoom:80%;" />

(2) 创建有损分解示例中 `t1 t2` 表，录入相应数据，查询两个表格的结果；

**Step1.**创建`t1`，属性如下：

<img src="https://noteimg-12138.oss-cn-beijing.aliyuncs.com/img/202211071823550.png" alt="image-20221107182331342" style="zoom:80%;" />

输入`t1`数据，输入后结果如下：

<img src="https://noteimg-12138.oss-cn-beijing.aliyuncs.com/img/202211071825747.png" alt="image-20221107182547598" style="zoom:80%;" />

**Step2.**建立`t2`表，属性如下：

<img src="https://noteimg-12138.oss-cn-beijing.aliyuncs.com/img/202211071827583.png" alt="image-20221107182705385" style="zoom:80%;" />

插入数据，结果如下图：

<img src="https://noteimg-12138.oss-cn-beijing.aliyuncs.com/img/202211071828549.png" alt="image-20221107182826408" style="zoom:80%;" />

(3) 对 `t1 t2`执行联接操作，查询结果，并与 `er_paper` 表比较；

执行语句

```sql
SELECT * FROM t1 NATURAL JOIN t2;
```

结果如下：

<img src="https://noteimg-12138.oss-cn-beijing.aliyuncs.com/img/202211071832928.png" alt="image-20221107183201826" style="zoom:80%;" />

和`er_paper`比较：

`t1 t2`自然联接的结果要比`erpaper`多几行“新内容”；

(4) 重复类似(1)-(3)的操作，对无损分解示例进行操作

**Step1.**建立`t3`表，属性如下；

<img src="https://noteimg-12138.oss-cn-beijing.aliyuncs.com/img/202211071834020.png" alt="image-20221107183430834" style="zoom:80%;" />

输入数据，结果如下图：

<img src="https://noteimg-12138.oss-cn-beijing.aliyuncs.com/img/202211071837458.png" alt="image-20221107183727344" style="zoom:80%;" />

**Step2.**建立`t4`，属性如下：

<img src="https://noteimg-12138.oss-cn-beijing.aliyuncs.com/img/202211071843908.png" alt="image-20221107184332691" style="zoom:80%;" />

输入数据，结果如下：

<img src="https://noteimg-12138.oss-cn-beijing.aliyuncs.com/img/202211071840457.png" alt="image-20221107184005344" style="zoom:80%;" />

**Step3.**联接两个表；

执行以下语句：

```sql
SELECT * FROM t3 NATURAL JOIN t4;
```

<img src="https://noteimg-12138.oss-cn-beijing.aliyuncs.com/img/202211071844829.png" alt="image-20221107184405647" style="zoom:80%;" />

和`er_paper`完全相同；

## 实验结果

有损分解后的两个表，自然联接后和原表不同；

无损分解后的两个表，自然联接后和原表相同；

## 源代码

==见实验思路==

## 思考题

Q: 有损联接分解与无损联接分解的区别？

无损联接分解：一个关系表被分解成两个或者两个以上的小表，通过联接被分解的小表可以获得==原始表==的准确内容；

有损联接分解在联接分解的小表时产生的结果会比原始表==多一部分元组==，说明丢失了信息。