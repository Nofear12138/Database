# 实验十一 属性-联系方法

|  姓名  |     学号     |     学院     |    日期    |
| :----: | :----------: | :----------: | :--------: |
| 臧祝利 | 202011998088 | 人工智能学院 | 2022.11.14 |

## 实验目的

了解关系模型设计的原则；

## 实验内容

尝试关系模式投入使用后可能会出现的数据冗余、更新复杂、插入异常、删除异常等操作；

## 实验思路

<img src="https://noteimg-12138.oss-cn-beijing.aliyuncs.com/img/202211141838994.png" alt="image-20221114183843845" style="zoom:80%;" />

（1）创建关系模式`S`，并插入图中数据，其中`eeid`与`eid`构成主键；

Step1.右击“表”，选择“创建”，“表...”，命名表为`S`;

<img src="https://noteimg-12138.oss-cn-beijing.aliyuncs.com/img/202211141844019.png" alt="image-20221114184415935" style="zoom:80%;" />

Step2.插入属性，设置`eeid`和`eid`为主键；

<img src="https://noteimg-12138.oss-cn-beijing.aliyuncs.com/img/202211141939925.png" alt="image-20221114193921799" style="zoom:80%;" />

Step3.插入数据，右击表，“查看/编辑数据”，点击“所有行”；

<img src="https://noteimg-12138.oss-cn-beijing.aliyuncs.com/img/202211141939730.png" alt="image-20221114193956665" style="zoom:80%;" />

点击按钮，进行插入；

<img src="https://noteimg-12138.oss-cn-beijing.aliyuncs.com/img/202211141940514.png" alt="image-20221114194057426" style="zoom:80%;" />

点击保存数据

<img src="https://noteimg-12138.oss-cn-beijing.aliyuncs.com/img/202211141945549.png" alt="image-20221114194559438" style="zoom: 80%;" />

（2）尝试更新关系模式S中计算机应用的考官号为`2002032`；

代码如下：

```SQL
UPDATE public."S"
	SET erid='2002032'
	WHERE ename='计算机应用基础';
```

查询结果如下：

```SQL
SELECT * FROM public."S"
ORDER BY eeid ASC, eid ASC 
```

<img src="https://noteimg-12138.oss-cn-beijing.aliyuncs.com/img/202211141951904.png" alt="image-20221114195121833" style="zoom:80%;" />

（3）尝试向关系模式S中插入一门新**考试科目**（`0102000001`，马克思主义基本原理，`2001002`）；

```SQL
INSERT INTO public."S"(
	eid, ename, erid)
	VALUES ('010200001', '马克思主义基本原理', '2001002');
```

报错，错误信息如下：

<img src="https://noteimg-12138.oss-cn-beijing.aliyuncs.com/img/202211141955577.png" alt="image-20221114195525508" style="zoom:80%;" />

==原因==：插入的数据中缺少`eeid`，而`eeid`为主键，不能为空，因此无法插入；

（4）尝试删除考生`218811011013`报考中国近代史纲要的元组；

```SQL
DELETE FROM public."S"
	WHERE eeid='218811011013' AND ename='中国近现代史纲要';
```

删除成功，查询结果为：

<img src="https://noteimg-12138.oss-cn-beijing.aliyuncs.com/img/202211142001590.png" alt="image-20221114200127513" style="zoom:80%;" />

## 实验结果

在本实验中，执行了三个操作，分别是更新、插入和删除，其中插入操作出现了问题，原因是`eeid`作为主键，但是给定的数据内没有`eeid`的值，因此产生了错误，在这当中，也感受到此关系模式中的问题；

- 数据冗余：·当一个考试有多个考生参与时，其试卷名和考官号会重复出现多次，
- 更新复杂：当一门考试有多个考生考试时，如果要更改考官号，则需要对所有的此科目的考生元组进行考官号的更新；
- 插入异常：若缺少主键属性会无法进行插入操作；
- 删除异常：会多删除不该删除的信息；

## 思考题

结合实验作业，说说好的关系模式有哪些衡量标准？

- 数据库中的数据冗余应该尽可能少，减少由于数据冗余而带来的系统维护负担；
- 不能出现数据的插入异常；
- 不能出现删除异常；
- 不仅要考虑数据自身结构的完整性，还要考虑到数据的使用需求；

